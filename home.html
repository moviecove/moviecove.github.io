<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MC Movies</title>
<!-- BASIC META -->
<meta name="title" content="MovieCove- Stream Movies Online">
<meta name="description" content="MovieCove is a streaming platform to discover and watch movies online. Search and Stream latest movies.">
<meta name="keywords" content="movies, streaming, watch movies online, MovieCove  Movies, latest movies, 2026 movies, Best movie platform">
<meta name="author" content="MovieCove">
<meta name="robots" content="index, follow">
<!-- MOBILE & THEME -->
<meta name="theme-color" content="#e50914">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<!-- OPEN GRAPH -->
<meta property="og:type" content="website">
<meta property="og:title" content="MovieCove – Stream Movies Online">
<meta property="og:description" content="Discover and stream movies on MovieCove.">
<meta property="og:url" content="https://MovieCove.github.io/">
<meta property="og:image" content="https://MovieCove.free.nf/assets/logo/logo.png">
<!-- TWITTER -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="MC Movies – Watch Movies Online">
<meta name="twitter:description" content="Stream and discover movies on MovieCove.">
<meta name="twitter:image" content="https://MovieCove.github.io/assets/logo/logo.png">
<!-- GOOGLE STRUCTURED DATA -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "MovieCove",
  "url": "https://MovieCove.github.io",
  "description": "MovieCove is a streaming platform to discover and watch movies online.",
  "publisher": {
    "@type": "Organization",
    "name": "MovieCove",
    "logo": {
      "@type": "ImageObject",
      "url": "https://moviecove.github.io/assets/logo/logo.png"
    }
  }
}
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:Arial,Helvetica,sans-serif;
}
body.light{
  background:#f4f4f4;
  color:#000;
}

/* STICKY HEADER */
header{
  position:sticky;
  top:0;
  z-index:1000;
  display:flex;
  align-items:center;
  gap:15px;
  padding:12px 20px;
  background:#111;
  transition: top 0.3s ease;
}
#logo{
  height:60px; /* bigger logo */
}
#siteName{
  font-size:26px;
  font-weight:bold;
  font-family: 'Trebuchet MS', sans-serif;
  background: linear-gradient(90deg,#e50914,#ff4500);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
#userEmail{
  margin-left:auto;
  font-size:14px;
  opacity:.8;
}

/* SEARCH BAR FIXED UNDER HEADER */
#searchBox{
  width:calc(100% - 40px);
  margin:0 20px 12px;
  padding:12px;
  font-size:16px;
  border-radius:6px;
  border:none;
  outline:none;
  position:sticky;
  top:84px; /* header height + padding */
  z-index:999;
}

/* MOVIES GRID: 2 per row */
#movies{
  display:grid;
  grid-template-columns:repeat(2, 1fr);
  gap:15px;
  padding:12px 20px;
  margin-top:8px;
}

.movie{
  cursor:pointer;
  background:#111;
  border-radius:10px;
  overflow:hidden;
  position:relative;
  transition:transform .2s;
}

.movie:hover{
  transform:scale(1.05);
}

.movie img{
  width:100%;
  display:block;
}

.movie h4{
  font-size:14px;
  margin:6px 8px 4px;
  line-height:1.2;
}

/* RATINGS */
.movie .rating{
  position:absolute;
  top:8px;
  right:8px;
  background:rgba(0,0,0,0.7);
  color:#ffd700;
  padding:2px 6px;
  border-radius:4px;
  font-size:12px;
  font-weight:bold;
}

/* PLAYER */
#playerBox{
  position:fixed;
  inset:0;
  background:#000;
  display:none;
  z-index:9999;
}

#playerHeader{
  display:flex;
  align-items:center;
  padding:8px;
  background:#111;
}

#playerHeader span{
  color:#e50914;
  font-weight:bold;
}

#playerHeader div{margin-left:auto;}

#playerHeader button{
  background:none;
  border:none;
  color:#fff;
  font-size:20px;
  margin-left:10px;
}

#playerBox iframe{
  width:100%;
  height:calc(100% - 40px);
  border:none;
}

/* MINIMIZED */
.minimized{
  width:75vw;
  height:42vw;
  max-height:75vh;
  inset:auto 10px 80px auto;
  cursor:move;
}

/* NAV */
nav{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:#111;
  display:flex;
  justify-content:space-around;
  padding:10px 0;
}
nav a{color:#fff;text-decoration:none;}
nav i{font-size:20px;}
</style>
</head>
<body>

<header id="mainHeader">
  <!-- Logo -->
  <img src="logo.png" id="logo" alt="Logo">
  <!-- Styled Movies text -->
  <div id="siteName">MovieCove</div>
  <div id="userEmail">Not logged in</div>
</header>

<!-- Search bar fixed under header -->
<input id="searchBox" placeholder="Search movies..." />

<div id="movies"></div>

<!-- PLAYER -->
<div id="playerBox">
  <div id="playerHeader">
    <span>MC</span>
    <div>
      <button id="minBtn"><i class="fa-solid fa-minus"></i></button>
      <button id="closeBtn"><i class="fa-solid fa-xmark"></i></button>
    </div>
  </div>
  <iframe id="playerFrame" allowfullscreen></iframe>
</div>

<!-- NAV -->
<nav>
  <a href="home.html"><i class="fa-solid fa-house"></i></a>
  <a href="continue1.html"><i class="fa-solid fa-video"></i></a>
  <a href="settings1.html"><i class="fa-solid fa-gear"></i></a>
  <a href="#" id="logout"><i class="fa-solid fa-arrow-right-from-bracket"></i></a>
</nav>

<script>
/* ===== THEME APPLY ===== */
if(localStorage.getItem("theme")==="light"){
  document.body.classList.add("light");
}

/* ===== CONFIG ===== */
const API_KEY = "AIzaSyDMv-soQYJcFerThUONbQvMbd86IJeiKM0";
const moviesDiv = document.getElementById("movies");
const searchBox = document.getElementById("searchBox");
const playerBox = document.getElementById("playerBox");
const frame = document.getElementById("playerFrame");
const userEmailDiv = document.getElementById("userEmail");
const mainHeader = document.getElementById("mainHeader");

/* ===== AUTH ===== */
function isLoggedIn(){ return localStorage.getItem("loggedIn")==="yes"; }
function getUserEmail(){ return localStorage.getItem("userEmail"); }
userEmailDiv.textContent = isLoggedIn() ? getUserEmail() : "Not logged in";

/* ===== LOAD MOVIES (long videos only + filter trailers/clips) ===== */
async function loadMovies(query="latest movies"){
  moviesDiv.innerHTML="<p style='padding:12px'>Loading...</p>";
  try{
    const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&videoDuration=long&maxResults=30&q=${encodeURIComponent(query)}&key=${API_KEY}`;
    const res = await fetch(url);
    const data = await res.json();
    if(data.error){
      moviesDiv.innerHTML = `<p style="padding:12px;color:red">YouTube API Error:<br>${data.error.message}</p>`;
      return;
    }
    if(!data.items || data.items.length===0){
      moviesDiv.innerHTML="<p style='padding:12px'>No movies found</p>";
      return;
    }
    moviesDiv.innerHTML="";
    data.items.forEach(v=>{
      if(!v.id.videoId) return;
      const titleLower = v.snippet.title.toLowerCase();
      if(titleLower.includes("trailer") || titleLower.includes("clip") || titleLower.includes("review") || titleLower.includes("short")) return;
      const rating = (Math.random()*4+1).toFixed(1);
      const card=document.createElement("div");
      card.className="movie";
      card.innerHTML=`
        <img src="${v.snippet.thumbnails.medium.url}">
        <div class="rating">${rating} ★</div>
        <h4>${v.snippet.title}</h4>
      `;
      card.onclick=()=>handlePlay(v.id.videoId,v.snippet.title,v.snippet.thumbnails.medium.url);
      moviesDiv.appendChild(card);
    });
  }catch(err){
    moviesDiv.innerHTML="<p style='padding:12px;color:red'>Network error</p>";
    console.error(err);
  }
}

/* ===== SEARCH ===== */
let searchDelay=null;
searchBox.addEventListener("input",()=>{
  clearTimeout(searchDelay);
  const q=searchBox.value.trim();
  if(q.length<2) return;
  searchDelay=setTimeout(()=>loadMovies(q),500);
});

/* ===== CONTINUE TRACKING ===== */
let trackTimer=null;
function startTracking(videoId,title,thumbnail){
  if(!isLoggedIn())return;
  const key="continue_"+getUserEmail();
  const movie={videoId,title,thumbnail,date:Date.now()};
  trackTimer=setInterval(()=>{
    let list=JSON.parse(localStorage.getItem(key)||"[]");
    list=list.filter(m=>m.videoId!==videoId);
    list.unshift(movie);
    localStorage.setItem(key,JSON.stringify(list));
  },5000);
}
function stopTracking(){ if(trackTimer){clearInterval(trackTimer);trackTimer=null;} }

/* ===== PLAY ===== */
function handlePlay(videoId,title,thumbnail){
  if(!isLoggedIn()){
    alert("Please login to watch movies");
    location.href="login.html";
    return;
  }
  // hide header while player active
  mainHeader.style.top = "-100px";
  searchBox.style.top = "-100px";

  playerBox.style.display="block";
  playerBox.classList.remove("minimized");
  startTracking(videoId,title,thumbnail);
  frame.src="https://www.youtube.com/embed/"+videoId+"?autoplay=1&controls=0&modestbranding=1";
}

/* ===== PLAYER CONTROLS ===== */
closeBtn.onclick=()=>{
  stopTracking();
  frame.src="";
  playerBox.style.display="none";
  mainHeader.style.top = "0";
  searchBox.style.top = "84px";
};
minBtn.onclick=()=>playerBox.classList.toggle("minimized");

/* ===== DRAG ===== */
let dragging=false,ox=0,oy=0;
playerBox.onmousedown=e=>{
  if(!playerBox.classList.contains("minimized"))return;
  dragging=true;ox=e.offsetX;oy=e.offsetY;
};
document.onmousemove=e=>{
  if(!dragging)return;
  playerBox.style.left=e.pageX-ox+"px";
  playerBox.style.top=e.pageY-oy+"px";
};
document.onmouseup=()=>dragging=false;

/* ===== LOGOUT ===== */
logout.onclick=()=>{
  localStorage.removeItem("loggedIn");
  localStorage.removeItem("userEmail");
  location.reload();
};

/* ===== INIT ===== */
loadMovies();
</script>
</body>
</html>