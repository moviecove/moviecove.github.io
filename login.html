<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login | MovieCove</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
@keyframes fadeIn {
  from { opacity:0; transform:scale(0.95); }
  to { opacity:1; transform:scale(1); }
}
</style>
</head>

<body style="
  margin:0;
  padding:0;
  background:#000;
  font-family:Arial, sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
">

<div id="loginBox" style="
  background:#111;
  width:90%;
  max-width:360px;
  padding:40px 35px;
  border-radius:15px;
  box-shadow:0 10px 30px rgba(0,0,0,0.6);
  text-align:center;
  animation:fadeIn 0.5s ease;
">

<img src="assets/logo/mc.svg" style="width:170px;margin-bottom:25px;">

<h2 style="color:#E50914;margin-bottom:20px;font-size:2rem;">Sign In</h2>

<form onsubmit="loginUser(event)" style="display:flex;flex-direction:column;gap:15px;">

<input type="email" id="email" placeholder="Email address" required
style="padding:12px;border-radius:8px;border:none;background:#222;color:#fff;">

<div style="position:relative;">
<input type="password" id="password" placeholder="Password" required
style="padding:12px;width:100%;border-radius:8px;border:none;background:#222;color:#fff;">
<i class="fa fa-eye" onclick="togglePassword()"
style="position:absolute;right:15px;top:14px;color:#777;cursor:pointer;"></i>
</div>

<button type="submit" style="
padding:12px;background:#E50914;border:none;border-radius:8px;
color:#fff;font-weight:bold;cursor:pointer;">
Login
</button>

</form>

<!-- GOOGLE LOGIN -->
<button onclick="googleLogin()" style="
margin-top:15px;
padding:12px;
width:100%;
border-radius:8px;
background:#fff;
color:#000;
font-weight:bold;
border:none;
cursor:pointer;">
<i class="fa-brands fa-google"></i> Continue with Google
</button>

<a href="register.html" style="display:block;margin-top:20px;color:#888;text-decoration:none;">
Donâ€™t have an account? Register
</a>

</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBGe_zawZt54ZP2xPrBF9KEos0U1h66lOE",
  authDomain: "moviecove-1.firebaseapp.com",
  projectId: "moviecove-1",
  storageBucket: "moviecove-1.firebasestorage.app",
  messagingSenderId: "870235002344",
  appId: "1:870235002344:web:ebc7d4095e52fff85ac05d"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const provider = new firebase.auth.GoogleAuthProvider();

function togglePassword(){
  const p=document.getElementById("password");
  p.type=p.type==="password"?"text":"password";
}

function loginUser(e){
  e.preventDefault();
  auth.signInWithEmailAndPassword(
    email.value,password.value
  ).then(cred=>{
    localStorage.setItem("loggedIn","yes");
    localStorage.setItem("userEmail",cred.user.email);
    location.href="home.html";
  }).catch(err=>{
    alert(err.message);
  });
}

function googleLogin(){
  auth.signInWithPopup(provider).then(result=>{
    localStorage.setItem("loggedIn","yes");
    localStorage.setItem("userEmail",result.user.email);
    location.href="home.html";
  }).catch(err=>alert(err.message));
}
</script>

</body>
</html>