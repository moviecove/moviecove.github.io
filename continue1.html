<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Continue Watching</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>

body{

  margin:0;

  background:#000;

  color:#fff;

  font-family:Arial,Helvetica,sans-serif;

}

body.light{background:#f4f4f4;color:#000}

/* HEADER */

header{

  display:flex;

  align-items:center;

  gap:10px;

  padding:12px;

}

#logo{color:#e50914;font-size:22px;font-weight:bold}

#title{font-size:20px}

#userEmail{margin-left:auto;font-size:14px;opacity:.8}

/* GRID */

#list{

  display:grid;

  grid-template-columns:repeat(auto-fill,minmax(170px,1fr));

  gap:15px;

  padding:12px;

}

.card{cursor:pointer;position:relative}

.card img{width:100%;border-radius:10px}

.card h4{font-size:14px;margin:6px 0 0}

/* DELETE */

.delete{

  position:absolute;

  inset:0;

  background:rgba(0,0,0,.7);

  display:flex;

  align-items:center;

  justify-content:center;

  font-size:22px;

  display:none;

}

.card.show .delete{display:flex}

/* NAV */

nav{

  position:fixed;

  bottom:0;left:0;right:0;

  background:#111;

  display:flex;

  justify-content:space-around;

  padding:10px 0;

  z-index:10;

}

nav a{color:#fff;text-decoration:none}

nav i{font-size:20px}

</style>

</head>

<body>

<header>

  <div id="logo">MC</div>

  <div id="title">Continue Watching</div>

  <div id="userEmail"></div>

</header>

<div id="list"></div>

<nav>

  <a href="home.html"><i class="fa-solid fa-house"></i></a>

  <a href="continue1.html"><i class="fa-solid fa-video"></i></a>

  <a href="settings1.html"><i class="fa-solid fa-gear"></i></a>

     <a href="#" id="logout"><i class="fa-solid fa-arrow-right-from-bracket"></i></a> 
    
</nav>

<script>

/* ===== THEME ===== */

if(localStorage.getItem("theme")==="light"){

  document.body.classList.add("light");

}

/* ===== AUTH ===== */

const isLoggedIn = localStorage.getItem("loggedIn")==="yes";

const email = localStorage.getItem("userEmail");

if(!isLoggedIn || !email){

  location.href="login.html";

}

document.getElementById("userEmail").textContent=email;

/* ===== LOAD CONTINUE ===== */

const key = "continue_" + email;

const listDiv = document.getElementById("list");

function loadContinue(){

  listDiv.innerHTML="";

  const data = JSON.parse(localStorage.getItem(key) || "[]");

  if(data.length===0){

    listDiv.innerHTML="<p style='padding:12px'>No movies yet</p>";

    return;

  }

  data.forEach((m,i)=>{

    const card=document.createElement("div");

    card.className="card";

    card.innerHTML=`

      <img src="${m.thumbnail}">

      <h4>${m.title}</h4>

      <div class="delete"><i class="fa-solid fa-trash"></i></div>

    `;

    // click → play

    card.onclick=()=>{

      location.href="home.html#"+m.videoId;

    };

    // long press → delete

    let press;

    card.onmousedown=()=>{

      press=setTimeout(()=>card.classList.add("show"),600);

    };

    card.onmouseup=()=>clearTimeout(press);

    card.querySelector(".delete").onclick=(e)=>{

      e.stopPropagation();

      if(confirm("Remove from Continue Watching?")){

        data.splice(i,1);

        localStorage.setItem(key,JSON.stringify(data));

        loadContinue();

      }

    };

    listDiv.appendChild(card);

  });

}

loadContinue();

</script>

</body>

</html>